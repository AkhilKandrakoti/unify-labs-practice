/* =========================================
   NEXUS PRO â€” Advanced CSS System
   - Design tokens, fluid type, container queries
   - Glass + depth, motion, reduced-motion support
   - Focus-visible accessibility
   ========================================= */

:root{
  --bg0: #070a14;
  --bg1: #0b1020;
  --panel: rgba(255,255,255,0.06);
  --panel-strong: rgba(255,255,255,0.10);
  --text: #e8ecff;
  --muted: rgba(232,236,255,0.72);
  --border: rgba(255,255,255,0.12);
  --shadow: 0 18px 50px rgba(0,0,0,0.45);
  --shadow-soft: 0 10px 30px rgba(0,0,0,0.25);
  --accent: #6ea8ff;
  --accent2: #31d0aa;
  --danger: #ff5c7a;

  --r-lg: 22px;
  --r-md: 16px;
  --r-sm: 12px;

  --pad-lg: 18px;
  --pad-md: 14px;
  --pad-sm: 10px;

  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;

  --step--1: clamp(0.78rem, 0.73rem + 0.2vw, 0.9rem);
  --step-0:  clamp(0.92rem, 0.86rem + 0.25vw, 1.02rem);
  --step-1:  clamp(1.08rem, 1.0rem + 0.35vw, 1.22rem);
  --step-2:  clamp(1.26rem, 1.15rem + 0.55vw, 1.5rem);
  --step-3:  clamp(1.55rem, 1.3rem + 1.1vw, 2.05rem);

  --ease-out: cubic-bezier(.16,.84,.22,1);
  --ease-in: cubic-bezier(.6,.06,.84,.4);
}

html[data-theme="light"]{
  --bg0: #f5f7ff;
  --bg1: #edf1ff;
  --panel: rgba(255,255,255,0.70);
  --panel-strong: rgba(255,255,255,0.85);
  --text: #0d1630;
  --muted: rgba(13,22,48,0.68);
  --border: rgba(13,22,48,0.12);
  --shadow: 0 18px 50px rgba(13,22,48,0.12);
  --shadow-soft: 0 10px 30px rgba(13,22,48,0.10);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: var(--font);
  color: var(--text);
  background:
    radial-gradient(1200px 700px at 15% 0%, color-mix(in oklab, var(--accent) 28%, transparent), transparent 60%),
    radial-gradient(900px 600px at 95% 10%, color-mix(in oklab, var(--accent2) 22%, transparent), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
}

.skip-link{
  position:absolute;
  left:-999px;
  top:-999px;
  background: var(--panel-strong);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 999px;
  box-shadow: var(--shadow-soft);
  z-index: 9999;
}
.skip-link:focus{
  left: 14px;
  top: 14px;
}

.muted{ color: var(--muted); }
.tiny{ font-size: var(--step--1); }

.kbd{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding: 2px 10px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 70%, transparent);
}

:focus-visible{
  outline: 3px solid color-mix(in oklab, var(--accent) 65%, white);
  outline-offset: 2px;
  border-radius: 10px;
}

/* Topbar */
.topbar{
  position: sticky;
  top:0;
  z-index: 50;

  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;

  padding: 14px 18px;
  border-bottom: 1px solid var(--border);

  background: color-mix(in oklab, var(--panel) 85%, transparent);
  backdrop-filter: blur(12px);
}
.brand{ display:flex; align-items:center; gap:12px; }
.brand__mark{
  width: 46px;
  height: 46px;
  border-radius: 18px;

  display:grid;
  place-items:center;

  background:
    linear-gradient(135deg,
      color-mix(in oklab, var(--accent) 90%, white),
      color-mix(in oklab, var(--accent2) 80%, transparent)
    );
  box-shadow: var(--shadow-soft);
  border: 1px solid color-mix(in oklab, var(--border) 70%, transparent);
}
.brand__mark span{
  color: white;
  font-weight: 900;
  font-size: 18px;
  letter-spacing: 0.6px;
  text-shadow: 0 10px 20px rgba(0,0,0,0.28);
}
.brand__text h1{
  margin:0;
  font-size: var(--step-1);
  letter-spacing: 0.7px;
}
.subtitle{
  margin: 4px 0 0 0;
  font-size: var(--step--1);
  color: var(--muted);
}
.topbar__actions{ display:flex; gap:10px; align-items:center; }

/* Buttons */
.btn{
  border:1px solid var(--border);
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--accent) 18%, transparent),
      color-mix(in oklab, var(--panel-strong) 70%, transparent)
    );
  color: var(--text);
  padding: 10px 14px;
  border-radius: 14px;
  cursor:pointer;
  box-shadow: var(--shadow-soft);
  transition: transform 160ms var(--ease-out), filter 160ms var(--ease-out);
}
.btn:hover{ filter: brightness(1.06); }
.btn:active{ transform: translateY(1px); }
.btn--ghost{
  background: transparent;
  box-shadow: none;
}

/* Layout */
.app{ padding: 18px; }
.shell{
  max-width: 1400px;
  margin: 0 auto;

  display:grid;
  grid-template-columns: 320px 1fr 360px;
  gap: 14px;
  align-items:start;
}

@media (max-width: 1200px){
  .shell{ grid-template-columns: 320px 1fr; }
  .side{ grid-column: 1 / -1; }
}
@media (max-width: 850px){
  .shell{ grid-template-columns: 1fr; }
  .rail{ order: 0; }
  .main{ order: 1; }
  .side{ order: 2; }
}

/* Cards */
.card{
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  background: var(--panel);
  box-shadow: var(--shadow);
  overflow:hidden;
  container-type: inline-size;
}
.card--glass{
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--panel-strong) 65%, transparent), transparent),
    var(--panel);
}
.card--soft{
  background: color-mix(in oklab, var(--panel-strong) 60%, transparent);
  box-shadow: var(--shadow-soft);
}
.card__head{
  padding: var(--pad-lg);
  border-bottom: 1px solid var(--border);
}
.card__head--sticky{
  position: sticky;
  top: 0;                 /* IMPORTANT: was 74px */
  z-index: 10;

  /* Make it opaque enough so cards won't show through */
  background: color-mix(in oklab, var(--panel-strong) 92%, transparent);
  backdrop-filter: blur(12px);

  border-bottom: 1px solid var(--border);
}
.head-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}
.card__title{
  margin:0;
  font-size: var(--step-1);
}
.card__desc{
  margin: 6px 0 0 0;
  color: var(--muted);
  font-size: var(--step--1);
}

/* Controls */
.form{ padding: var(--pad-lg); display:flex; flex-direction:column; gap:12px; }
.field{ display:flex; flex-direction:column; gap:8px; }
.field__label{ font-size: var(--step--1); color: var(--muted); }
.field__input{
  border-radius: 14px;
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 60%, transparent);
  color: var(--text);
  padding: 11px 12px;
  font-size: var(--step-0);
  transition: border-color 160ms var(--ease-out), transform 160ms var(--ease-out);
}
.field__input:focus{
  border-color: color-mix(in oklab, var(--accent) 65%, var(--border));
}
.field__hint{ font-size: var(--step--1); color: var(--muted); opacity:0.9; }
.field__input--compact{ padding: 9px 10px; border-radius: 12px; }

.meta{ display:flex; flex-direction:column; gap:10px; margin-top: 4px; }
.pill-row{ display:flex; gap:10px; flex-wrap:wrap; }
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 7px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 55%, transparent);
  color: var(--muted);
  font-size: var(--step--1);
}
.pill--soft{
  background: color-mix(in oklab, var(--panel-strong) 40%, transparent);
}

.badge{
  display:inline-flex;
  align-items:center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 55%, transparent);
  font-size: var(--step--1);
  color: var(--muted);
}

/* Analytics */
.analytics{ padding: var(--pad-lg); display:flex; flex-direction:column; gap:12px; }
.metric{
  padding: 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 45%, transparent);
}
.metric__label{ font-size: var(--step--1); color: var(--muted); }
.metric__value{ margin-top: 6px; font-size: var(--step-2); font-weight: 800; letter-spacing: 0.2px; }

.spark{
  padding: 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 45%, transparent);
}
.spark__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  color: var(--muted);
  font-size: var(--step--1);
  margin-bottom: 10px;
}
canvas{
  width:100%;
  height:auto;
  display:block;
  border-radius: 12px;
  border: 1px solid color-mix(in oklab, var(--border) 80%, transparent);
  background: color-mix(in oklab, var(--panel-strong) 25%, transparent);
}

/* Grid list */
.grid{
  padding: var(--pad-lg);
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}
@media (max-width: 1100px){ .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (max-width: 650px){ .grid{ grid-template-columns: 1fr; } }

/* Coin cards */
.coin-card{
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  background:
    linear-gradient(180deg, color-mix(in oklab, var(--panel-strong) 38%, transparent), transparent),
    color-mix(in oklab, var(--panel) 90%, transparent);
  box-shadow: var(--shadow-soft);

  padding: 14px;
  display:flex;
  flex-direction:column;
  gap: 12px;

  transform: translateY(0);
  transition: transform 160ms var(--ease-out), filter 160ms var(--ease-out);
  min-height: 180px;
}
.coin-card:hover{
  transform: translateY(-2px);
  filter: brightness(1.04);
}
.coin-top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}
.coin-id{
  display:flex;
  align-items:center;
  gap:10px;
  min-width: 0;
}
.coin-id img{
  width: 30px;
  height: 30px;
  border-radius: 50%;
  box-shadow: 0 12px 30px rgba(0,0,0,0.25);
}
.coin-id h3{
  margin:0;
  font-size: var(--step-0);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.coin-id p{
  margin: 4px 0 0 0;
  color: var(--muted);
  font-size: var(--step--1);
  text-transform: uppercase;
  letter-spacing: 0.9px;
}
.price{
  text-align:right;
}
.price .v{
  font-weight: 900;
  font-size: var(--step-1);
}
.price .s{
  margin-top: 4px;
  font-size: var(--step--1);
  color: var(--muted);
}

.kv{
  display:flex;
  justify-content:space-between;
  gap:10px;
  font-size: var(--step--1);
  color: var(--muted);
}
.pct{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  font-size: var(--step--1);
}
.pct--up{ color: color-mix(in oklab, var(--accent2) 90%, white); }
.pct--down{ color: color-mix(in oklab, var(--danger) 90%, white); }

.card-actions{
  margin-top:auto;
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
}
.icon-btn{
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 9px 12px;
  background: transparent;
  color: var(--text);
  cursor:pointer;
  font-size: var(--step--1);
  transition: filter 160ms var(--ease-out), transform 160ms var(--ease-out);
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}
.icon-btn:hover{ filter: brightness(1.06); }
.icon-btn:active{ transform: translateY(1px); }
.icon-btn--save{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--accent2) 20%, transparent),
    color-mix(in oklab, var(--panel-strong) 50%, transparent)
  );
}
.icon-btn--danger{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--danger) 18%, transparent),
    color-mix(in oklab, var(--panel-strong) 50%, transparent)
  );
}

/* Skeleton */
.skeleton{
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  background: color-mix(in oklab, var(--panel-strong) 28%, transparent);
  min-height: 180px;
  position:relative;
  overflow:hidden;
}
.skeleton::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.09), transparent);
  transform: translateX(-100%);
  animation: shimmer 1.1s infinite;
}
@keyframes shimmer{
  100%{ transform: translateX(100%); }
}

/* Watchlist */
.watchlist{
  padding: var(--pad-lg);
  display:flex;
  flex-direction:column;
  gap:10px;
}
.watch{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;

  padding: 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 40%, transparent);
}
.watch__left{ display:flex; align-items:center; gap:10px; min-width:0; }
.watch__left img{ width: 22px; height: 22px; border-radius: 50%; }
.watch__meta{ min-width:0; }
.watch__meta strong{
  display:block;
  font-size: var(--step-0);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.watch__meta span{
  display:block;
  font-size: var(--step--1);
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.8px;
}

/* Dialog */
.dialog{
  border: none;
  padding: 0;
  background: transparent;
}
.dialog::backdrop{
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(8px);
}
.dialog__panel{
  width: min(620px, calc(100vw - 24px));
  border-radius: var(--r-lg);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 75%, transparent);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.dialog__head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}
.dialog__head h3{ margin:0; font-size: var(--step-1); }
.dialog__body{ padding: 16px; display:flex; flex-direction:column; gap:14px; }
.dialog__foot{ padding: 14px 16px; border-top: 1px solid var(--border); display:flex; justify-content:flex-end; }

.toggle-row{
  padding: 12px;
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 40%, transparent);

  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
}
.toggle-row__title{ font-weight: 800; font-size: var(--step-0); }
.toggle-row__desc{ margin-top: 4px; font-size: var(--step--1); color: var(--muted); }

.switch{
  position:relative;
  width: 54px;
  height: 30px;
  display:inline-block;
}
.switch input{ opacity:0; width:0; height:0; }
.switch__track{
  position:absolute;
  inset:0;
  border-radius: 999px;
  background: color-mix(in oklab, var(--panel-strong) 55%, transparent);
  border: 1px solid var(--border);
}
.switch__thumb{
  position:absolute;
  top: 4px;
  left: 4px;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--accent), color-mix(in oklab, var(--accent2) 60%, transparent));
  box-shadow: var(--shadow-soft);
  transition: transform 200ms var(--ease-out);
}
.switch input:checked ~ .switch__thumb{ transform: translateX(24px); }

/* Toast */
.toast-host{
  position:fixed;
  right: 16px;
  bottom: 16px;
  z-index: 999;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.toast{
  width: min(380px, calc(100vw - 32px));
  border-radius: var(--r-md);
  border: 1px solid var(--border);
  background: color-mix(in oklab, var(--panel-strong) 80%, transparent);
  box-shadow: var(--shadow);
  padding: 12px 12px;
}
.toast strong{ display:block; font-size: var(--step-0); }
.toast p{ margin: 6px 0 0 0; font-size: var(--step--1); color: var(--muted); }

/* Checklist */
.checklist{
  margin: 0;
  padding: 0 0 0 18px;
  color: var(--muted);
  font-size: var(--step--1);
}
.checklist li{ margin: 8px 0; }

/* Footer */
.footer{
  padding: 18px;
  text-align:center;
  color: var(--muted);
  font-size: var(--step--1);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; scroll-behavior:auto !important; }
}

/* Make the Live Market card its own scroll container */
.main__card{
  max-height: calc(100vh - 120px); /* adjust if needed */
  overflow: auto;
}
.grid{
  padding-top: 16px; /* adds breathing room below the sticky header */
}