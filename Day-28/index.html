<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cloud Asset Explorer — Pagination + Index Advisor</title>
  <meta name="description" content="A professional dashboard demo implementing pagination, search, filtering, sorting, and MongoDB index strategy visualization." />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="bg-noise" aria-hidden="true"></div>

  <header class="top">
    <div class="wrap top__inner">
      <div class="brand">
        <div class="brand__mark" aria-hidden="true">CAE</div>
        <div class="brand__text">
          <h1>Cloud Asset Explorer</h1>
          <p>Pagination • Index Strategy • Atlas-ready query patterns</p>
        </div>
      </div>

      <div class="top__actions">
        <button class="btn btn--ghost" id="btnReset" type="button" title="Reset filters">
          Reset
        </button>
        <button class="btn" id="btnSeed" type="button" title="Regenerate demo data">
          Regenerate Data
        </button>
      </div>
    </div>
  </header>

  <main class="wrap grid" id="app">
    <!-- LEFT: Explorer -->
    <section class="card">
      <div class="card__head">
        <h2>Asset Browser</h2>
        <span class="pill" id="resultPill">0 results</span>
      </div>

      <div class="toolbar">
        <label class="field">
          <span class="field__label">Search</span>
          <div class="field__control">
            <input id="q" type="search" placeholder="Search name, team, tags… (debounced)" autocomplete="off" />
            <kbd class="kbd" title="Tip">⌘K</kbd>
          </div>
          <small class="field__hint">Simulates Atlas text search / indexed prefix queries.</small>
        </label>

        <div class="row">
          <label class="field">
            <span class="field__label">Region</span>
            <select id="region">
              <option value="all">All</option>
              <option value="ap-south-1">ap-south-1</option>
              <option value="ap-southeast-1">ap-southeast-1</option>
              <option value="us-east-1">us-east-1</option>
              <option value="eu-west-1">eu-west-1</option>
            </select>
          </label>

          <label class="field">
            <span class="field__label">Status</span>
            <select id="status">
              <option value="all">All</option>
              <option value="running">running</option>
              <option value="stopped">stopped</option>
              <option value="degraded">degraded</option>
            </select>
          </label>

          <label class="field">
            <span class="field__label">Sort</span>
            <select id="sort">
              <option value="updated_desc">Last Updated (newest)</option>
              <option value="updated_asc">Last Updated (oldest)</option>
              <option value="cost_desc">Monthly Cost (high → low)</option>
              <option value="cost_asc">Monthly Cost (low → high)</option>
              <option value="name_asc">Name (A → Z)</option>
              <option value="name_desc">Name (Z → A)</option>
            </select>
          </label>
        </div>

        <div class="row row--tight">
          <label class="field">
            <span class="field__label">Page Size</span>
            <select id="pageSize">
              <option>6</option>
              <option selected>9</option>
              <option>12</option>
              <option>18</option>
            </select>
          </label>

          <div class="metrics" aria-live="polite">
            <div class="metric">
              <span class="metric__k">Shown</span>
              <span class="metric__v" id="shownCount">0</span>
            </div>
            <div class="metric">
              <span class="metric__k">Total</span>
              <span class="metric__v" id="totalCount">0</span>
            </div>
            <div class="metric">
              <span class="metric__k">Page</span>
              <span class="metric__v" id="pageCount">0/0</span>
            </div>
          </div>
        </div>
      </div>

      <div class="list" id="list" role="list"></div>

      <div class="pagination" id="pagination">
        <button class="btn btn--ghost" id="prev" type="button">← Prev</button>
        <div class="pager" id="pager" aria-label="Pagination"></div>
        <button class="btn btn--ghost" id="next" type="button">Next →</button>
      </div>
    </section>

    <!-- RIGHT: Index + Atlas Panel -->
    <aside class="card card--side">
      <div class="card__head">
        <h2>Index Advisor</h2>
        <span class="pill pill--soft" id="perfPill">Estimator</span>
      </div>

      <div class="side">
        <div class="panel">
          <h3>Current “Query Shape”</h3>
          <pre class="code" id="queryShape">{}</pre>
          <p class="muted">
            This is what your backend would translate into a MongoDB query + options.
          </p>
        </div>

        <div class="panel">
          <h3>Recommended Indexes</h3>
          <div class="chips" id="indexChips"></div>
          <p class="muted">
            Based on active filters + sort. (Compound indexes matter!)
          </p>
        </div>

        <div class="panel">
          <h3>Performance Estimator</h3>

          <div class="meter">
            <div class="meter__row">
              <span>Estimated Docs Scanned</span>
              <strong id="scanCount">0</strong>
            </div>
            <div class="meter__bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
              <div class="meter__fill" id="meterFill"></div>
            </div>
            <div class="meter__row meter__row--small">
              <span class="muted">Lower scan = better index coverage</span>
              <span class="muted" id="coverageText">—</span>
            </div>
          </div>

          <div class="callout">
            <strong>MongoDB Atlas Tip:</strong>
            <p>
              In Atlas, you’d verify this with <span class="mono">explain()</span> and build indexes in the UI or via driver scripts.
            </p>
          </div>
        </div>

        <div class="panel">
          <h3>Knowledge Check (Quick)</h3>
          <ol class="quiz">
            <li>Why can a compound index speed up both filtering and sorting?</li>
            <li>When is a text index better than a normal index?</li>
            <li>What’s a tradeoff of too many indexes?</li>
          </ol>
          <p class="muted">Use this mini project to answer confidently.</p>
        </div>
      </div>
    </aside>
  </main>

  <footer class="wrap foot">
    <span class="muted">CAE Demo • Frontend-only simulation of Atlas-ready patterns</span>
    <span class="muted">Keyboard: <span class="mono">Ctrl/⌘ + K</span> focus search • <span class="mono">← →</span> page</span>
  </footer>

  <script src="./app.js"></script>
</body>
</html>